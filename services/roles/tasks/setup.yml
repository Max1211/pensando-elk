---
- name: Adjust max map count
    sysctl:
    name: vm.max_map_count
    value: 262144
    state: present

- name: Setup directories
    file:
    path: "{{ item }}"
    recurse: yes
    with_items:
    - "{{ paths.filebeat }}"
    - "{{ paths.elasticsearch }}"

- name: Sync filebeat config
    synchronize:
    src: files/filebeat.yml
    dest: "{{ paths.filebeat }}"
    notify:
    - change ownership
    - restart filebeat

- name: Create network
    docker_network:
    name: pensando-elk