- hosts: localhost
  become: true
  tasks:
  - name: Install python modules.
    shell: "dnf install python3 python-dnf"
    args:
      warn: false
  - name: Install dnf-plugins-core to manage DNF repository
    shell: "dnf -y install dnf-plugins-core"
    args:
      warn: false

  - name: Add docker repo
    shell:  'dnf config-manager \
      --add-repo \
      https://download.docker.com/linux/centos/docker-ce.repo'

  - name: Update dnf package index
    dnf:
     name: docker-engine
     state: latest

  - name: Start docker service
    systemd:
      state: started
      name: docker
